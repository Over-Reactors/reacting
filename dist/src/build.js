(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"/Users/jessethach/cf-adv/reactful/src/js/bear_app.js":[function(require,module,exports){
//show Bear
var Bear = React.createClass({displayName: "Bear",
  render: function() {
    return (
      React.createElement("div", {className: "bear"},
        React.createElement("h2", {className: "bearName"},
          "Name: ", this.props.name
        ),
        React.createElement("p", null,
          "Fish Preference: ", this.props.fishPreferences
        )
      )
    );
  }
});


//update bear
var UpdateBear = React.createClass({displayName: "UpdateBear",
  getInitialState: function() {
    return {name: this.props.name, fishPreference: this.props.fishPreferences, _id: this.props.key};
  },
  handleNameChange: function(e) {
    this.setState({name: e.target.value});
  },
  handleFishPreferenceChange: function(e) {
    this.setState({fishPreference: e.target.value});
  },
  handleSubmit: function(e) {
    e.preventDefault();
    var name = this.state.name.trim();
    var fishPreference = this.state.fishPreference.trim();
    var bear = {name: name, fishPreference: fishPreference};
    if (!fishPreference || !name) {
      return;
    }
    $.ajax({
      url: "http://localhost:3000/api/bears/" + this.props._id,
      dataType: 'json',
      type: 'PUT',
      data: bear,
      success: function(data) {
        console.log('updated');
      }.bind(this),
      error: function(xhr, status, err) {
        console.error(this.props.url, status, err.toString());
      }.bind(this)
    });
    this.setState({name: '', fishPreference: ''});
  },
  render: function() {
    return (

      React.createElement("form", {className: "bearUpdate", onSubmit: this.handleSubmit},
        React.createElement("input", {
          type: "text",
          placeholder: "Bear Name",
          value: this.state.name,
          onChange: this.handleNameChange}
        ),
        React.createElement("input", {
          type: "text",
          placeholder: "Fish Preference",
          value: this.state.fishPreference,
          onChange: this.handleFishPreferenceChange}
        ),
        React.createElement("input", {
          type: "submit",
          value: "Update"}
        )
      )
      )
  }
});

var BearDelete = React.createClass({displayName: "BearDelete",
  getInitialState: function() {
    return {_id: this.props._id};
  },
  killBear: function(){
    var id = this.state._id;
    $.ajax({
        url: 'http://localhost:3000/api/bears/' + id,
        type: 'DELETE',
        cache: false,
        success: function(data) {
          console.log('gone!');
        }.bind(this),
        error: function(xhr, status, err) {
          console.error(this.props.url, status, err.toString());
        }.bind(this)
      });
  },
  render: function(){
    var id = this.state._id;
    return (
          React.createElement("button", {onClick: this.killBear}, "x")
    );
  }
});

//bear list
var BearList = React.createClass({displayName: "BearList",

  render: function() {
    var bearNodes = this.props.data.map(function(bear) {
      return (
        React.createElement("div", {key: bear._id},
          React.createElement(Bear, {name: bear.name, fishPreferences: bear.fishPreference}),
          React.createElement(BearDelete, {_id: bear._id}),
          React.createElement(UpdateBear, {_id: bear._id, name: bear.name, fishPreference: bear.fishPreference})
        )
      );
    });
    return (
      React.createElement("div", {className: "bearList"},
        bearNodes
      )
    );
  }
});

//new bear
var BearForm = React.createClass({displayName: "BearForm",
  getInitialState: function() {
    return {name: '', fishPreference: ''};
  },
  handleNameChange: function(e) {
    this.setState({name: e.target.value});
  },
  handleFishPreferenceChange: function(e) {
    this.setState({fishPreference: e.target.value});
  },
  handleSubmit: function(e) {
    e.preventDefault();
    var name = this.state.name.trim();
    var fishPreference = this.state.fishPreference.trim();
    if (!fishPreference || !name) {
      return;
    }
    this.props.onBearSubmit({name: name, fishPreference: fishPreference});
    this.setState({name: '', fishPreference: ''});
  },
  render: function() {
    return (
      React.createElement("form", {className: "bearForm", onSubmit: this.handleSubmit},
        React.createElement("h2", null, "New Bear"),
        React.createElement("input", {
          type: "text",
          placeholder: "Bear Name",
          value: this.state.name,
          onChange: this.handleNameChange}
        ),
        React.createElement("input", {
          type: "text",
          placeholder: "fish preference",
          value: this.state.fishPreference,
          onChange: this.handleFishPreferenceChange}
        ),
        React.createElement("input", {type: "submit", value: "Post"})
      )
    );
  }
});

// get the bears and store them in data
var BearBox = React.createClass({displayName: "BearBox",
  loadBearsFromServer: function() {
    $.ajax({
      url: this.props.url,
      dataType: 'json',
      cache: false,
      success: function(data) {
        this.setState({data: data});
      }.bind(this),
      error: function(xhr, status, err) {
        console.error(this.props.url, status, err.toString());
      }.bind(this)
    });
  },
  handleBearSubmit: function(bear) {
    console.log(bear);
    $.ajax({
      url: this.props.url,
      dataType: 'json',
      type: 'POST',
      data: bear,
      success: function(data) {
        console.log('hooray');
      }.bind(this),
      error: function(xhr, status, err) {
        console.error(this.props.url, status, err.toString());
      }.bind(this)
    });
  },
  getInitialState: function() {
    return {data: []};
  },
  componentDidMount: function() {
    this.loadBearsFromServer();
    setInterval(this.loadBearsFromServer, this.props.pollInterval);
  },
  render: function() {
    return (
      React.createElement("div", {className: "bearBox"},
        React.createElement("h1", null, "BEARS"),
        React.createElement(BearList, {data: this.state.data}),
        React.createElement(BearForm, {onBearSubmit: this.handleBearSubmit})
      )
    );
  }
});

ReactDOM.render(
  React.createElement(BearBox, {url: "http://localhost:3000/api/bears", pollInterval: 1000}),
  document.getElementById('content')
);

},{}]},{},["/Users/jessethach/cf-adv/reactful/src/js/bear_app.js"])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvamVzc2V0aGFjaC9jZi1hZHYvcmVhY3RmdWwvc3JjL2pzL2JlYXJfYXBwLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUEsV0FBVztBQUNYLElBQUksMEJBQTBCLG9CQUFBO0VBQzVCLE1BQU0sRUFBRSxXQUFXO0lBQ2pCO01BQ0Usb0JBQUEsS0FBSSxFQUFBLENBQUEsQ0FBQyxTQUFBLEVBQVMsQ0FBQyxNQUFPLENBQUEsRUFBQTtRQUNwQixvQkFBQSxJQUFHLEVBQUEsQ0FBQSxDQUFDLFNBQUEsRUFBUyxDQUFDLFVBQVcsQ0FBQSxFQUFBO0FBQUEsVUFBQSxRQUFBLEVBQ2hCLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSztRQUNwQixDQUFBLEVBQUE7UUFDTCxvQkFBQSxHQUFFLEVBQUEsSUFBQyxFQUFBO0FBQUEsVUFBQSxtQkFBQSxFQUNpQixJQUFJLENBQUMsS0FBSyxDQUFDLGVBQWdCO1FBQzNDLENBQUE7TUFDQSxDQUFBO01BQ047R0FDSDtBQUNILENBQUMsQ0FBQyxDQUFDO0FBQ0g7O0FBRUEsYUFBYTtBQUNiLElBQUksVUFBVSxHQUFHLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxXQUFXLEVBQUUsWUFBWTtFQUMzRCxlQUFlLEVBQUUsV0FBVztJQUMxQixPQUFPLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLGNBQWMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLGVBQWUsRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztHQUNqRztFQUNELGdCQUFnQixFQUFFLFNBQVMsQ0FBQyxFQUFFO0lBQzVCLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxD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LFFBQVEsQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDO0NBQ25DLENBQUMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLy9zaG93IEJlYXJcbnZhciBCZWFyID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJlYXJcIj5cbiAgICAgICAgPGgyIGNsYXNzTmFtZT1cImJlYXJOYW1lXCI+XG4gICAgICAgICAgTmFtZToge3RoaXMucHJvcHMubmFtZX1cbiAgICAgICAgPC9oMj5cbiAgICAgICAgPHA+XG4gICAgICAgICAgRmlzaCBQcmVmZXJlbmNlOiB7dGhpcy5wcm9wcy5maXNoUHJlZmVyZW5jZXN9XG4gICAgICAgIDwvcD5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn0pO1xuXG5cbi8vdXBkYXRlIGJlYXJcbnZhciBVcGRhdGVCZWFyID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiBcIlVwZGF0ZUJlYXJcIixcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge25hbWU6IHRoaXMucHJvcHMubmFtZSwgZmlzaFByZWZlcmVuY2U6IHRoaXMucHJvcHMuZmlzaFByZWZlcmVuY2VzLCBfaWQ6IHRoaXMucHJvcHMua2V5fTtcbiAgfSxcbiAgaGFuZGxlTmFtZUNoYW5nZTogZnVuY3Rpb24oZSkge1xuICAgIHRoaXMuc2V0U3RhdGUoe25hbWU6IGUudGFyZ2V0LnZhbHVlfSk7XG4gIH0sXG4gIGhhbmRsZUZpc2hQcmVmZXJlbmNlQ2hhbmdlOiBmdW5jdGlvbihlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7ZmlzaFByZWZlcmVuY2U6IGUudGFyZ2V0LnZhbHVlfSk7XG4gIH0sXG4gIGhhbmRsZVN1Ym1pdDogZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgbmFtZSA9IHRoaXMuc3RhdGUubmFtZS50cmltKCk7XG4gICAgdmFyIGZpc2hQcmVmZXJlbmNlID0gdGhpcy5zdGF0ZS5maXNoUHJlZmVyZW5jZS50cmltKCk7XG4gICAgdmFyIGJlYXIgPSB7bmFtZTogbmFtZSwgZmlzaFByZWZlcmVuY2U6IGZpc2hQcmVmZXJlbmNlfTtcbiAgICBpZiAoIWZpc2hQcmVmZXJlbmNlIHx8ICFuYW1lKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgICQuYWpheCh7XG4gICAgICB1cmw6IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9iZWFycy9cIiArIHRoaXMucHJvcHMuX2lkLFxuICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgIHR5cGU6ICdQVVQnLFxuICAgICAgZGF0YTogYmVhcixcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3VwZGF0ZWQnKTtcbiAgICAgIH0uYmluZCh0aGlzKSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbih4aHIsIHN0YXR1cywgZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IodGhpcy5wcm9wcy51cmwsIHN0YXR1cywgZXJyLnRvU3RyaW5nKCkpO1xuICAgICAgfS5iaW5kKHRoaXMpXG4gICAgfSk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7bmFtZTogJycsIGZpc2hQcmVmZXJlbmNlOiAnJ30pO1xuICB9LFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG5cbiAgICAgIDxmb3JtIGNsYXNzTmFtZT1cImJlYXJVcGRhdGVcIiBvblN1Ym1pdD17dGhpcy5oYW5kbGVTdWJtaXR9PlxuICAgICAgICA8aW5wdXRcbiAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJCZWFyIE5hbWVcIlxuICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLm5hbWV9XG4gICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlTmFtZUNoYW5nZX1cbiAgICAgICAgLz5cbiAgICAgICAgPGlucHV0XG4gICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwiRmlzaCBQcmVmZXJlbmNlXCJcbiAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5maXNoUHJlZmVyZW5jZX1cbiAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVGaXNoUHJlZmVyZW5jZUNoYW5nZX1cbiAgICAgICAgLz5cbiAgICAgICAgPGlucHV0XG4gICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXG4gICAgICAgICAgdmFsdWU9XCJVcGRhdGVcIlxuICAgICAgICAvPlxuICAgICAgPC9mb3JtPlxuICAgICAgKVxuICB9XG59KTtcblxudmFyIEJlYXJEZWxldGUgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6IFwiQmVhckRlbGV0ZVwiLFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7X2lkOiB0aGlzLnByb3BzLl9pZH07XG4gIH0sXG4gIGtpbGxCZWFyOiBmdW5jdGlvbigpe1xuICAgIHZhciBpZCA9IHRoaXMuc3RhdGUuX2lkO1xuICAgICQuYWpheCh7XG4gICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYmVhcnMvJyArIGlkLFxuICAgICAgICB0eXBlOiAnREVMRVRFJyxcbiAgICAgICAgY2FjaGU6IGZhbHNlLFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2dvbmUhJyk7XG4gICAgICAgIH0uYmluZCh0aGlzKSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKHhociwgc3RhdHVzLCBlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMucHJvcHMudXJsLCBzdGF0dXMsIGVyci50b1N0cmluZygpKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICB9KTtcbiAgfSxcbiAgcmVuZGVyOiBmdW5jdGlvbigpe1xuICAgIHZhciBpZCA9IHRoaXMuc3RhdGUuX2lkO1xuICAgIHJldHVybiAoXG4gICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPSB7dGhpcy5raWxsQmVhcn0gPng8L2J1dHRvbj5cbiAgICApO1xuICB9XG59KTtcblxuLy9iZWFyIGxpc3RcbnZhciBCZWFyTGlzdCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBiZWFyTm9kZXMgPSB0aGlzLnByb3BzLmRhdGEubWFwKGZ1bmN0aW9uKGJlYXIpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYga2V5PXtiZWFyLl9pZH0+XG4gICAgICAgICAgPEJlYXIgbmFtZT17YmVhci5uYW1lfSBmaXNoUHJlZmVyZW5jZXM9e2JlYXIuZmlzaFByZWZlcmVuY2V9PjwvQmVhcj5cbiAgICAgICAgICA8QmVhckRlbGV0ZSBfaWQ9e2JlYXIuX2lkfT48L0JlYXJEZWxldGU+XG4gICAgICAgICAgPFVwZGF0ZUJlYXIgX2lkPXtiZWFyLl9pZH0gbmFtZT17YmVhci5uYW1lfSBmaXNoUHJlZmVyZW5jZT17YmVhci5maXNoUHJlZmVyZW5jZX0+PC9VcGRhdGVCZWFyPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfSk7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmVhckxpc3RcIj5cbiAgICAgICAge2JlYXJOb2Rlc31cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn0pO1xuXG4vL25ldyBiZWFyXG52YXIgQmVhckZvcm0gPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtuYW1lOiAnJywgZmlzaFByZWZlcmVuY2U6ICcnfTtcbiAgfSxcbiAgaGFuZGxlTmFtZUNoYW5nZTogZnVuY3Rpb24oZSkge1xuICAgIHRoaXMuc2V0U3RhdGUoe25hbWU6IGUudGFyZ2V0LnZhbHVlfSk7XG4gIH0sXG4gIGhhbmRsZUZpc2hQcmVmZXJlbmNlQ2hhbmdlOiBmdW5jdGlvbihlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7ZmlzaFByZWZlcmVuY2U6IGUudGFyZ2V0LnZhbHVlfSk7XG4gIH0sXG4gIGhhbmRsZVN1Ym1pdDogZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgbmFtZSA9IHRoaXMuc3RhdGUubmFtZS50cmltKCk7XG4gICAgdmFyIGZpc2hQcmVmZXJlbmNlID0gdGhpcy5zdGF0ZS5maXNoUHJlZmVyZW5jZS50cmltKCk7XG4gICAgaWYgKCFmaXNoUHJlZmVyZW5jZSB8fCAhbmFtZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnByb3BzLm9uQmVhclN1Ym1pdCh7bmFtZTogbmFtZSwgZmlzaFByZWZlcmVuY2U6IGZpc2hQcmVmZXJlbmNlfSk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7bmFtZTogJycsIGZpc2hQcmVmZXJlbmNlOiAnJ30pO1xuICB9LFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8Zm9ybSBjbGFzc05hbWU9XCJiZWFyRm9ybVwiIG9uU3VibWl0PXt0aGlzLmhhbmRsZVN1Ym1pdH0+XG4gICAgICAgIDxoMj5OZXcgQmVhcjwvaDI+XG4gICAgICAgIDxpbnB1dFxuICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICBwbGFjZWhvbGRlcj1cIkJlYXIgTmFtZVwiXG4gICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUubmFtZX1cbiAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVOYW1lQ2hhbmdlfVxuICAgICAgICAvPlxuICAgICAgICA8aW5wdXRcbiAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJmaXNoIHByZWZlcmVuY2VcIlxuICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmZpc2hQcmVmZXJlbmNlfVxuICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUZpc2hQcmVmZXJlbmNlQ2hhbmdlfVxuICAgICAgICAvPlxuICAgICAgICA8aW5wdXQgdHlwZT1cInN1Ym1pdFwiIHZhbHVlPVwiUG9zdFwiIC8+XG4gICAgICA8L2Zvcm0+XG4gICAgKTtcbiAgfVxufSk7XG5cbi8vIGdldCB0aGUgYmVhcnMgYW5kIHN0b3JlIHRoZW0gaW4gZGF0YVxudmFyIEJlYXJCb3ggPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gIGxvYWRCZWFyc0Zyb21TZXJ2ZXI6IGZ1bmN0aW9uKCkge1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6IHRoaXMucHJvcHMudXJsLFxuICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgIGNhY2hlOiBmYWxzZSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZGF0YTogZGF0YX0pO1xuICAgICAgfS5iaW5kKHRoaXMpLFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKHhociwgc3RhdHVzLCBlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcih0aGlzLnByb3BzLnVybCwgc3RhdHVzLCBlcnIudG9TdHJpbmcoKSk7XG4gICAgICB9LmJpbmQodGhpcylcbiAgICB9KTtcbiAgfSxcbiAgaGFuZGxlQmVhclN1Ym1pdDogZnVuY3Rpb24oYmVhcikge1xuICAgIGNvbnNvbGUubG9nKGJlYXIpO1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6IHRoaXMucHJvcHMudXJsLFxuICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgIGRhdGE6IGJlYXIsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdob29yYXknKTtcbiAgICAgIH0uYmluZCh0aGlzKSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbih4aHIsIHN0YXR1cywgZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IodGhpcy5wcm9wcy51cmwsIHN0YXR1cywgZXJyLnRvU3RyaW5nKCkpO1xuICAgICAgfS5iaW5kKHRoaXMpXG4gICAgfSk7XG4gIH0sXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtkYXRhOiBbXX07XG4gIH0sXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmxvYWRCZWFyc0Zyb21TZXJ2ZXIoKTtcbiAgICBzZXRJbnRlcnZhbCh0aGlzLmxvYWRCZWFyc0Zyb21TZXJ2ZXIsIHRoaXMucHJvcHMucG9sbEludGVydmFsKTtcbiAgfSxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZWFyQm94XCI+XG4gICAgICAgIDxoMT5CRUFSUzwvaDE+XG4gICAgICAgIDxCZWFyTGlzdCBkYXRhPXt0aGlzLnN0YXRlLmRhdGF9IC8+XG4gICAgICAgIDxCZWFyRm9ybSBvbkJlYXJTdWJtaXQ9e3RoaXMuaGFuZGxlQmVhclN1Ym1pdH0gLz5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn0pO1xuXG5SZWFjdERPTS5yZW5kZXIoXG4gIDxCZWFyQm94IHVybD1cImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYmVhcnNcIiBwb2xsSW50ZXJ2YWw9ezEwMDB9IC8+LFxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGVudCcpXG4pO1xuIl19
